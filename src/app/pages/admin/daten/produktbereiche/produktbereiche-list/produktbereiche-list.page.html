<ion-header>
    <ion-toolbar>
        <ion-menu-button slot="start"></ion-menu-button>
        <ion-title>Produktbereiche</ion-title>
    </ion-toolbar>
</ion-header>

@defer (when produktbereiche()) {
<ion-content>
    <ion-list lines="full">
        @for (produktbereich of produktbereiche(); track produktbereich.id) {
        <ion-item [routerLink]="[produktbereich.id]">
            <ion-label>
                <h3>{{ produktbereich.name }}</h3>
            </ion-label>
            @if (produktbereich.bestand === null || produktbereich.bestand >= 20)
            {
            <ion-chip color="success">
                <ion-icon name="checkmark-circle"></ion-icon>
                <ion-label>
                    @if (produktbereich.bestand)
                    {
                    <span>{{ produktbereich.bestand }} {{ produktbereich.einheit }}</span>
                    }
                    @else
                    {
                    <span>Unlimitiert</span>
                    }
                </ion-label>
            </ion-chip>
            }
            @else {
            @let color = produktbereich.bestand > 0 ? 'warning' : 'danger';
            <ion-chip [color]="color">
                <ion-icon name="alert-circle"></ion-icon>
                <ion-label>{{ produktbereich.bestand }} {{ produktbereich.einheit }}</ion-label>
            </ion-chip>
            }

        </ion-item>
        }
    </ion-list>
</ion-content>
}

@placeholder{
<ffgbsy-page-spinner></ffgbsy-page-spinner>
}
